(()=>{"use strict";Math.pow(10,8);var e=36e5;function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e,l){var n;t(1,arguments);var r=a(null!==(n=null==l?void 0:l.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,i=o(e);if(i.date){var u=c(i.date,r);s=d(u.restDateString,u.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var g,p=s.getTime(),T=0;if(i.time&&(T=m(i.time),isNaN(T)))return new Date(NaN);if(!i.timezone){var y=new Date(p+T),h=new Date(0);return h.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),h.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),h}return g=k(i.timezone),isNaN(g)?new Date(NaN):new Date(p+T+g)}var n={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},r=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function o(e){var t,a={},l=e.split(n.dateTimeDelimiter);if(l.length>2)return a;if(/:/.test(l[0])?t=l[0]:(a.date=l[0],t=l[1],n.timeZoneDelimiter.test(a.date)&&(a.date=e.split(n.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var r=n.timezone.exec(t);r?(a.time=t.replace(r[1],""),a.timezone=r[1]):a.time=t}return a}function c(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),l=e.match(a);if(!l)return{year:NaN,restDateString:""};var n=l[1]?parseInt(l[1]):null,r=l[2]?parseInt(l[2]):null;return{year:null===r?n:100*r,restDateString:e.slice((l[1]||l[2]).length)}}function d(e,t){if(null===t)return new Date(NaN);var a=e.match(r);if(!a)return new Date(NaN);var l=!!a[4],n=u(a[1]),s=u(a[2])-1,i=u(a[3]),o=u(a[4]),c=u(a[5])-1;if(l)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,o,c)?function(e,t,a){var l=new Date(0);l.setUTCFullYear(e,0,4);var n=7*(t-1)+a+1-(l.getUTCDay()||7);return l.setUTCDate(l.getUTCDate()+n),l}(t,o,c):new Date(NaN);var d=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(p[t]||(T(e)?29:28))}(t,s,i)&&function(e,t){return t>=1&&t<=(T(e)?366:365)}(t,n)?(d.setUTCFullYear(t,s,Math.max(n,i)),d):new Date(NaN)}function u(e){return e?parseInt(e):1}function m(t){var a=t.match(s);if(!a)return NaN;var l=g(a[1]),n=g(a[2]),r=g(a[3]);return function(e,t,a){return 24===e?0===t&&0===a:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(l,n,r)?l*e+6e4*n+1e3*r:NaN}function g(e){return e&&parseFloat(e.replace(",","."))||0}function k(t){if("Z"===t)return 0;var a=t.match(i);if(!a)return 0;var l="+"===a[1]?-1:1,n=parseInt(a[2]),r=a[3]&&parseInt(a[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?l*(n*e+6e4*r):NaN}var p=[31,null,31,30,31,30,31,31,30,31,30,31];function T(e){return e%400==0||e%4==0&&e%100!=0}const y={allTasks:{tasks:[],customProjects:[]}},h=(()=>{const e=e=>{let t=document.getElementById("main"),a=document.createElement("div");a.classList.add("divCard"),a.setAttribute("data-index",e.index),"none"===e.strike?a.style.textDecorationLine="none":a.style.textDecorationLine="line-through",a.innerText=`${e.title}\n        Note: ${e.notes}\n        Due by ${e.dueDate}\n        ${e.priority} priority`;let l=document.createElement("img");l.classList.add("trash"),l.src="imgs/trash.svg",a.appendChild(l),f.createTrashEventHandler(l),l=document.createElement("img"),l.classList.add("check"),l.src="imgs/check.svg",a.appendChild(l),f.createTextStrike(l),l=document.createElement("img"),l.classList.add("plus"),l.src="imgs/plus.svg",a.appendChild(l),f.createAddToProject(l),l=document.createElement("img"),l.classList.add("edit"),l.src="imgs/pencil.svg",a.appendChild(l),f.editTask(l),t.appendChild(a)},t=()=>{for(let t=0;t<y.allTasks.tasks.length;t++)e(y.allTasks.tasks[t])},a=()=>{document.querySelector(".projectList").style.visibility="hidden",document.getElementById("projectForm").reset()},n=e=>{let t=document.querySelector(".projectsDiv"),l=document.createElement("div");l.classList.add("project"),l.setAttribute("project-type",e.name),l.innerText=e.name;let n=document.createElement("img");n.classList.add("projectTrash"),n.src="imgs/trash.svg",l.append(n),n.addEventListener("click",(e=>s(e,n))),l.addEventListener("click",(()=>r(l))),t.appendChild(l),a()},r=a=>{let n=document.getElementById("main");for(;n.firstChild;)n.removeChild(n.firstChild);let r=document.getElementById("projectNameDisplay");r.innerText="";let s=a.getAttribute("project-type");if("allTasks"==s)r.innerText="All Tasks",t();else if("thisWeek"==s){r.innerText="This Week";let t=JSON.parse(localStorage.getItem("allTasks"));if(null==t)return;for(let a=0;a<t.tasks.length;a++){let n=new Date,r=(l(t.tasks[a].dueDate).getTime()-n.getTime())/864e5;r<=7&&r>=-1&&e(t.tasks[a])}}else if("thisMonth"==s){r.innerText="This Month";let t=JSON.parse(localStorage.getItem("allTasks"));if(null==t)return;for(let a=0;a<t.tasks.length;a++)(new Date).getMonth()==l(t.tasks[a].dueDate).getMonth()&&e(t.tasks[a])}else if("priorityLevel"===s){r.innerText="High Priority";let t=JSON.parse(localStorage.getItem("allTasks"));if(null==t.tasks)return;for(let a=0;a<t.tasks.length;a++)"High"===t.tasks[a].priority&&e(t.tasks[a])}else{r.innerText=s;let t=JSON.parse(localStorage.getItem("allTasks"));for(let a=0;a<t.tasks.length;a++)t.tasks[a].list==s&&e(t.tasks[a])}},s=(e,a)=>{e.stopImmediatePropagation();let l=a.parentElement.getAttribute("project-type"),n=y.allTasks.customProjects;document.getElementById("projectNameDisplay").innerText="All Tasks",a.parentElement.remove();let r=document.getElementById("main");for(;r.firstChild;)r.removeChild(r.firstChild);for(let e=0;e<n.length;e++)n[e].name==l&&n.splice(e,1);let s=y.allTasks.tasks;for(let e=0;e<s.length;e++)s[e].list==l&&s.splice(e,1),f.updateTaskIndex();JSON.parse(localStorage.getItem("allTasks")),localStorage.removeItem("allTasks"),localStorage.setItem("allTasks",JSON.stringify(y.allTasks)),t()};return{createTask:()=>{document.querySelector(".formList").style.visibility="visible"},submitTask:()=>{document.querySelector(".formList").style.visibility="hidden",f.storeTaskForm(),document.getElementById("form").reset()},cancelTask:()=>{document.querySelector(".formList").style.visibility="hidden",document.getElementById("form").reset()},displayTask:e,displayDefaultList:t,displayStoredProjects:()=>{for(let e=0;e<y.allTasks.customProjects.length;e++)n(y.allTasks.customProjects[e])},addNewProject:()=>{document.querySelector(".projectList").style.visibility="visible"},cancelProjectCreation:a,addProjectToList:n,displaySelectedProject:r,deleteProject:s}})(),f=(()=>{const e=()=>{let e=y.allTasks.tasks;for(let t=0;t<e.length;t++)e[t].index=t;localStorage.setItem("allTasks",JSON.stringify(y.allTasks))},t=()=>{let e=document.querySelectorAll(".divCard");Array.from(e).forEach((function(t){t.setAttribute("data-index",Array.from(e).indexOf(t))}))},a=e=>{e.onclick=t=>{let a=e.parentElement;a.parentElement.removeChild(a)}};return{storeTaskForm:()=>{let e=y.allTasks.tasks.length,t={title:document.getElementById("title").value,notes:document.getElementById("notes").value,dueDate:document.getElementById("dueDate").value,priority:document.getElementById("priority").value,strike:"none",list:"none",index:e};(e=>{y.allTasks.tasks.push(e),JSON.parse(localStorage.getItem("allTasks")),localStorage.setItem("allTasks",JSON.stringify(y.allTasks))})(t),h.displayTask(t)},saveNewProject:()=>{let e={name:document.getElementById("projectName").value};(e=>{JSON.parse(localStorage.getItem("allTasks")),y.allTasks.customProjects.push(e),localStorage.setItem("allTasks",JSON.stringify(y.allTasks))})(e),h.addProjectToList(e)},createTrashEventHandler:a=>{a.onclick=l=>{let n=a.parentElement.getAttribute("data-index");document.querySelector("#main").removeChild(a.parentElement),y.allTasks.tasks.splice(n,1),e(),t()}},createTextStrike:e=>{e.onclick=t=>{let a=e.parentElement,l=e.parentElement.getAttribute("data-index"),n=y.allTasks.tasks[l];"none"==a.style.textDecorationLine?(a.style.textDecorationLine="line-through",n.strike="strike"):(a.style.textDecorationLine="none",n.strike="none"),localStorage.setItem("allTasks",JSON.stringify(y.allTasks))}},editTask:a=>{a.onclick=l=>{let n=a.parentElement.getAttribute("data-index");h.createTask(),document.getElementById("title").value=y.allTasks.tasks[n].title,document.getElementById("notes").value=y.allTasks.tasks[n].notes,document.getElementById("dueDate").value=y.allTasks.tasks[n].dueDate,document.getElementById("priority").value=y.allTasks.tasks[n].priority,document.querySelector("#main").removeChild(a.parentElement),y.allTasks.tasks.splice(n,1),e(),t()}},updateTaskIndex:e,createAddToProject:e=>{e.onclick=t=>{let l=JSON.parse(localStorage.getItem("allTasks"));if(l=l.customProjects,0!=l.length){let t=document.createElement("div");t.classList.add("projectAddPopup"),t.innerText="Select a project to add this task to:\n\n                ",e.parentElement.appendChild(t);let n=document.createElement("select");for(let e=0;e<l.length;e++){let t=document.createElement("option");t.value=l[e].name,t.text=l[e].name,n.add(t)}t.appendChild(n);let r=document.createElement("button");r.classList.add(".addTaskToProjectBtn"),r.innerText="Submit",t.appendChild(r),((e,t,a)=>{t.onclick=l=>{let n=e.parentElement.getAttribute("data-index"),r=y.allTasks.tasks[n],s=a.value,i=y.allTasks.customProjects;for(let e=0;e<i.length;e++)i[e].name==s&&(r.list=s),localStorage.setItem("allTasks",JSON.stringify(y.allTasks));let o=t.parentElement;o.parentElement.removeChild(o)}})(e,r,n);let s=document.createElement("button");return s.classList.add(".cancelTaskToProjectBtn"),s.innerText="Cancel",t.appendChild(s),a(s),n}{let t=document.createElement("div");t.classList.add("projectAddPopup"),t.innerText="Create a Project first\n                \n                ",e.parentElement.appendChild(t);let l=document.createElement("button");l.classList.add(".cancelTaskToProjectBtn"),l.innerText="Cancel",t.appendChild(l),a(l)}}},pageLoad:()=>{let e=JSON.parse(localStorage.getItem("allTasks"));null!=e&&((e=>{if(null!=(e=e.tasks)){for(let t=0;t<e.length;t++)y.allTasks.tasks.push(e[t]);h.displayDefaultList()}})(e),(e=>{let t=e.customProjects;if(null!=t){for(let e=0;e<t.length;e++)y.allTasks.customProjects.push(t[e]);h.displayStoredProjects()}})(e),localStorage.removeItem("allTasks"),localStorage.setItem("allTasks",JSON.stringify(y.allTasks)))}}})();f.pageLoad(),document.querySelector(".createTask").addEventListener("click",h.createTask),document.querySelector(".submitTaskBtn").addEventListener("click",h.submitTask),document.querySelector(".cancelTaskBtn").addEventListener("click",h.cancelTask);let v=document.querySelectorAll(".project");for(let e=0;e<v.length;e++)v[e].addEventListener("mouseup",(()=>{h.displaySelectedProject(v[e])}));let S=document.querySelectorAll(".projectTrash");for(let e=0;e<S.length;e++)S[e].addEventListener("click",(t=>{h.deleteProject(t,S[e])}));document.querySelector(".newProject").addEventListener("click",h.addNewProject),document.querySelector(".cancel").addEventListener("click",h.cancelProjectCreation),document.querySelector(".save").addEventListener("click",f.saveNewProject)})();