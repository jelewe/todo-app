(()=>{"use strict";Math.pow(10,8);var e=36e5;function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function a(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function l(e,l){var r;t(1,arguments);var n=a(null!==(r=null==l?void 0:l.additionalDigits)&&void 0!==r?r:2);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,i=o(e);if(i.date){var u=c(i.date,n);s=d(u.restDateString,u.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);var g,p=s.getTime(),T=0;if(i.time&&(T=m(i.time),isNaN(T)))return new Date(NaN);if(!i.timezone){var f=new Date(p+T),h=new Date(0);return h.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),h.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),h}return g=k(i.timezone),isNaN(g)?new Date(NaN):new Date(p+T+g)}var r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},n=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function o(e){var t,a={},l=e.split(r.dateTimeDelimiter);if(l.length>2)return a;if(/:/.test(l[0])?t=l[0]:(a.date=l[0],t=l[1],r.timeZoneDelimiter.test(a.date)&&(a.date=e.split(r.timeZoneDelimiter)[0],t=e.substr(a.date.length,e.length))),t){var n=r.timezone.exec(t);n?(a.time=t.replace(n[1],""),a.timezone=n[1]):a.time=t}return a}function c(e,t){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),l=e.match(a);if(!l)return{year:NaN,restDateString:""};var r=l[1]?parseInt(l[1]):null,n=l[2]?parseInt(l[2]):null;return{year:null===n?r:100*n,restDateString:e.slice((l[1]||l[2]).length)}}function d(e,t){if(null===t)return new Date(NaN);var a=e.match(n);if(!a)return new Date(NaN);var l=!!a[4],r=u(a[1]),s=u(a[2])-1,i=u(a[3]),o=u(a[4]),c=u(a[5])-1;if(l)return function(e,t,a){return t>=1&&t<=53&&a>=0&&a<=6}(0,o,c)?function(e,t,a){var l=new Date(0);l.setUTCFullYear(e,0,4);var r=7*(t-1)+a+1-(l.getUTCDay()||7);return l.setUTCDate(l.getUTCDate()+r),l}(t,o,c):new Date(NaN);var d=new Date(0);return function(e,t,a){return t>=0&&t<=11&&a>=1&&a<=(p[t]||(T(e)?29:28))}(t,s,i)&&function(e,t){return t>=1&&t<=(T(e)?366:365)}(t,r)?(d.setUTCFullYear(t,s,Math.max(r,i)),d):new Date(NaN)}function u(e){return e?parseInt(e):1}function m(t){var a=t.match(s);if(!a)return NaN;var l=g(a[1]),r=g(a[2]),n=g(a[3]);return function(e,t,a){return 24===e?0===t&&0===a:a>=0&&a<60&&t>=0&&t<60&&e>=0&&e<25}(l,r,n)?l*e+6e4*r+1e3*n:NaN}function g(e){return e&&parseFloat(e.replace(",","."))||0}function k(t){if("Z"===t)return 0;var a=t.match(i);if(!a)return 0;var l="+"===a[1]?-1:1,r=parseInt(a[2]),n=a[3]&&parseInt(a[3])||0;return function(e,t){return t>=0&&t<=59}(0,n)?l*(r*e+6e4*n):NaN}var p=[31,null,31,30,31,30,31,31,30,31,30,31];function T(e){return e%400==0||e%4==0&&e%100!=0}const f={allTasks:{tasks:[],customProjects:[]}},h=(()=>{const e=e=>{let t=document.getElementById("main"),a=document.createElement("div");a.classList.add("divCard"),a.setAttribute("data-index",f.allTasks.tasks.indexOf(e)),"none"==e.strike?a.style.textDecorationLine="none":a.style.textDecorationLine="line-through",a.innerText=`${e.title}\n        ${e.notes}\n        ${e.dueDate}\n        ${e.priority}`;let l=document.createElement("img");l.classList.add("trash"),l.src="../src/imgs/trash.svg",a.appendChild(l),y.createTrashEventHandler(l),l=document.createElement("img"),l.classList.add("check"),l.src="../src/imgs/check.svg",a.appendChild(l),y.createTextStrike(l),l=document.createElement("img"),l.classList.add("plus"),l.src="../src/imgs/plus.svg",a.appendChild(l),y.createAddToProject(l),t.appendChild(a)},t=()=>{for(let t=0;t<f.allTasks.tasks.length;t++)e(f.allTasks.tasks[t])},a=()=>{document.querySelector(".projectList").style.visibility="hidden",document.getElementById("projectForm").reset()},r=e=>{let t=document.querySelector(".projectsDiv"),l=document.createElement("div");l.classList.add("project"),l.setAttribute("project-type",e.name),l.innerText=e.name,t.appendChild(l),a()};return{createTask:()=>{document.querySelector(".formList").style.visibility="visible"},submitTask:()=>{document.querySelector(".formList").style.visibility="hidden",y.storeTaskForm(),document.getElementById("form").reset()},cancelTask:()=>{document.querySelector(".formList").style.visibility="hidden",document.getElementById("form").reset()},displayTask:e,displayDefaultList:t,displayStoredProjects:()=>{for(let e=0;e<f.allTasks.customProjects.length;e++)r(f.allTasks.customProjects[e])},addNewProject:()=>{document.querySelector(".projectList").style.visibility="visible"},cancelProjectCreation:a,addProjectToList:r,displaySelectedProject:a=>{let r=document.getElementById("main");for(;r.firstChild;)r.removeChild(r.firstChild);let n=a.getAttribute("project-type");if("allTasks"==n)t();else if("thisWeek"==n){let t=JSON.parse(localStorage.getItem("allTasks"));if(null==t)return;for(let a=0;a<t.tasks.length;a++){let r=new Date,n=(l(t.tasks[a].dueDate).getTime()-r.getTime())/864e5;n<=7&&n>=-1&&e(t.tasks[a])}}else if("thisMonth"==n){let t=JSON.parse(localStorage.getItem("allTasks"));if(null==t)return;for(let a=0;a<t.tasks.length;a++)(new Date).getMonth()==l(t.tasks[a].dueDate).getMonth()&&e(t.tasks[a])}else if("priorityLevel"==n){let t=JSON.parse(localStorage.getItem("allTasks"));if(null==t)return;for(let a=0;a<t.tasks.length;a++)"high"==t.tasks[a].priority&&e(t.tasks[a])}else{let t=JSON.parse(localStorage.getItem("allTasks"));for(let a=0;a<t.tasks.length;a++)t.tasks[a].list==n&&e(t.tasks[a])}},deleteProject:e=>{console.log(e.parentElement)}}})(),y=(()=>{const e=e=>{e.onclick=t=>{let a=e.parentElement;a.parentElement.removeChild(a)}};return{storeTaskForm:()=>{let e={title:document.getElementById("title").value,notes:document.getElementById("notes").value,dueDate:document.getElementById("dueDate").value,priority:document.getElementById("priority").value,strike:"none",list:"none"};(e=>{f.allTasks.tasks.push(e),JSON.parse(localStorage.getItem("allTasks")),localStorage.setItem("allTasks",JSON.stringify(f.allTasks))})(e),h.displayTask(e)},saveNewProject:()=>{let e={name:document.getElementById("projectName").value};(e=>{let t=JSON.parse(localStorage.getItem("allTasks"));t=t.customProjects,null==t?(f.allTasks.customProjects.push(e),localStorage.setItem("allTasks",JSON.stringify(f.allTasks))):(f.allTasks.customProjects.push(e),localStorage.removeItem("allTasks"),localStorage.setItem("allTasks",JSON.stringify(f.allTasks)))})(e),h.addProjectToList(e)},createTrashEventHandler:e=>{e.onclick=t=>{let a=e.parentElement.getAttribute("data-index");document.querySelector("#main").removeChild(e.parentElement),f.allTasks.tasks.splice(a,1),localStorage.setItem("allTasks",JSON.stringify(f.allTasks));let l=document.querySelectorAll(".divCard");Array.from(l).forEach((function(e){e.setAttribute("data-index",Array.from(l).indexOf(e))}))}},createTextStrike:e=>{e.onclick=t=>{let a=e.parentElement,l=e.parentElement.getAttribute("data-index"),r=f.allTasks.tasks[l];"none"==a.style.textDecorationLine?(a.style.textDecorationLine="line-through",r.strike="strike"):(a.style.textDecorationLine="none",r.strike="none"),localStorage.setItem("allTasks",JSON.stringify(f.allTasks))}},createAddToProject:t=>{t.onclick=a=>{let l=JSON.parse(localStorage.getItem("allTasks"));if(l=l.customProjects,null!=l){let a=document.createElement("div");a.classList.add("projectAddPopup"),a.innerText="Select a project to add this task to:\n                ",t.parentElement.appendChild(a);let r=document.createElement("select");for(let e=0;e<l.length;e++){let t=document.createElement("option");t.value=l[e].name,t.text=l[e].name,r.add(t)}a.appendChild(r);let n=document.createElement("button");n.classList.add(".addTaskToProjectBtn"),n.innerText="Submit",a.appendChild(n),((e,t,a)=>{t.onclick=l=>{let r=e.parentElement.getAttribute("data-index"),n=f.allTasks.tasks[r],s=a.value,i=f.allTasks.customProjects;for(let e=0;e<i.length;e++)i[e].name==s&&(n.list=s),localStorage.setItem("allTasks",JSON.stringify(f.allTasks));let o=t.parentElement;o.parentElement.removeChild(o)}})(t,n,r);let s=document.createElement("button");return s.classList.add(".cancelTaskToProjectBtn"),s.innerText="Cancel",a.appendChild(s),e(s),r}{let a=document.createElement("div");a.classList.add("projectAddPopup"),a.innerText="Create a Project first",t.parentElement.appendChild(a);let l=document.createElement("button");l.classList.add(".cancelTaskToProjectBtn"),l.innerText="Cancel",a.appendChild(l),e(l)}}},pageLoad:()=>{let e=JSON.parse(localStorage.getItem("allTasks")),t=e.customProjects;if(e=e.tasks,null!=e){for(let t=0;t<e.length;t++)f.allTasks.tasks.push(e[t]);if(h.displayDefaultList(),null!=t){for(let e=0;e<t.length;e++)f.allTasks.customProjects.push(t[e]);h.displayStoredProjects(),localStorage.removeItem("allTasks"),localStorage.setItem("allTasks",JSON.stringify(f.allTasks))}}}}})();y.pageLoad(),document.querySelector(".createTask").addEventListener("click",h.createTask),document.querySelector(".submitTaskBtn").addEventListener("click",h.submitTask),document.querySelector(".cancelTaskBtn").addEventListener("click",h.cancelTask);let v=document.querySelectorAll(".project");for(let e=0;e<v.length;e++)v[e].addEventListener("click",(()=>{h.displaySelectedProject(v[e])}));let S=document.querySelectorAll(".projectTrash");for(let e=0;e<S.length;e++)S[e].addEventListener("click",(()=>{h.deleteProject(S[e])}));document.querySelector(".newProject").addEventListener("click",h.addNewProject),document.querySelector(".cancel").addEventListener("click",h.cancelProjectCreation),document.querySelector(".save").addEventListener("click",y.saveNewProject)})();